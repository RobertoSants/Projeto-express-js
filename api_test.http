# API TESTS — Partes 1 a 4 (corrigido)
# Use com o REST Client (extensão do VS Code)

# ---------- PARTE 1 — CRIACIONAIS ----------
### TESTE 1 - Criar log info
POST http://localhost:3000/logs
Content-Type: application/json

{
  "level": "info",
  "message": "Servidor iniciado - teste api_test"
}

###

### TESTE 2 - Listar logs
GET http://localhost:3000/logs

###

### TESTE 3 - Enviar notificação (email)
POST http://localhost:3000/notify
Content-Type: application/json

{
  "type": "email",
  "recipient": "roberto@example.com",
  "subject": "Teste",
  "content": "Mensagem de teste via API"
}

###

# ---------- PARTE 2 — ESTRUTURAIS ----------
### TESTE 4 - Processar pagamento via Adapter
POST http://localhost:3000/payments
Content-Type: application/json

{
  "orderId": "ORD-1001",
  "amount": 199.90
}

###

### TESTE 5 - Exportar dados JSON simples
POST http://localhost:3000/exports
Content-Type: application/json

{
  "data": { "id": 1, "cliente": "Roberto", "valor": 150.0 },
  "format": "json",
  "compressed": false,
  "encrypted": false
}

###

### TESTE 6 - Exportar dados com compressão (decorator)
POST http://localhost:3000/exports
Content-Type: application/json

{
  "data": [{ "id": 1, "cliente": "Roberto", "valor": 150.0 }, { "id": 2, "cliente": "Maria", "valor": 200.0 }],
  "format": "csv",
  "compressed": true,
  "encrypted": false
}

###

### TESTE 7 - Criar pedido via Facade (Parte 2)
POST http://localhost:3000/facade/order
Content-Type: application/json

{
  "customerId": "CUST1",
  "productIds": ["P1", "P2", "P3"]
}

###

# ---------- PARTE 3 — COMPORTAMENTAIS ----------
### TESTE 8 - Observer: Inscrever SMS observer
POST http://localhost:3000/stock/subscribe
Content-Type: application/json

{
  "id": "obs_sms_1",
  "type": "sms",
  "destination": "+558299999999"
}

###

### TESTE 9 - Observer: atualizar preço (dispara notificações)
POST http://localhost:3000/stock/update
Content-Type: application/json

{
  "stock": "ACME",
  "price": 42.5
}

###

### TESTE 10 - Strategy: aplicar desconto percentual
POST http://localhost:3000/discounts
Content-Type: application/json

{
  "type": "percent",
  "amount": 200,
  "value": 10
}

###

### TESTE 11 - Chain: submeter pedido (válido) — Parte 3
POST http://localhost:3000/orders
Content-Type: application/json

{
  "products": [{ "id": "P1", "price": 100 }, { "id": "P2", "price": 150 }],
  "discount": 10
}

###

### TESTE 12 - Chain: submeter pedido (estoque insuficiente) — Parte 3
POST http://localhost:3000/orders
Content-Type: application/json

{
  "products": [{ "id": "OUT", "price": 100 }],
  "discount": 0
}

###

### TESTE 13 - Template: processar pagamento por cartão (Parte 3)
POST http://localhost:3000/payproc
Content-Type: application/json

{
  "type": "card",
  "paymentInfo": { "cardNumber": "4111111111111111", "amount": 250.00 }
}

###

### TESTE 14 - Template: processar pagamento via PayPal (Parte 3)
POST http://localhost:3000/payproc
Content-Type: application/json

{
  "type": "paypal",
  "paymentInfo": { "paypalAccount": "user@paypal.com", "amount": 99.9 }
}

###

# ---------- PARTE 4 — PROJETO INTEGRADOR ----------
### TESTE 15 - Catálogo: criar produto (Factory + Builder + Observer)
POST http://localhost:3000/catalog/create
Content-Type: application/json

{
  "type": "eletronico",
  "name": "Smart TV 50",
  "stock": 5
}

###

### TESTE 16 - Carrinho: calcular total (Composite + Strategy)
POST http://localhost:3000/cart/checkout
Content-Type: application/json

{
  "items": [
    { "name": "Smart TV", "price": 2500 },
    { "name": "HD Externo", "price": 300 }
  ],
  "shippingType": "flat"
}

###

### TESTE 17 - Pedido E-commerce: processar (Chain + Template) — usa rota /ecomorders
POST http://localhost:3000/ecomorders/process
Content-Type: application/json

{
  "items": [
    { "id": "TV", "price": 2500, "stock": 3 },
    { "id": "HD", "price": 300, "stock": 10 }
  ],
  "payment": { "type": "paypal", "data": { "paypalAccount": "cliente@pay.com", "amount": 2800 } },
  "discount": 50,
  "customer": { "name": "Roberto", "email": "roberto@example.com" }
}

###

### TEST 18 - Sistema de Descontos (Strategy + Decorator) — Parte 4
POST http://localhost:3000/discountsys/apply
Content-Type: application/json

{
  "amount": 1000,
  "strategies": [
    { "type": "percent", "value": 10 },
    { "type": "fixed", "value": 50 }
  ],
  "combine": true
}

###

### TEST 19 - Integração com serviços externos (Adapter + Facade) — Parte 4
POST http://localhost:3000/integrations/external-order
Content-Type: application/json

{
  "amount": 199.9,
  "customer": { "name": "Cliente Externo" }
}

###